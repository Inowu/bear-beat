@import "src/styles/_variables-theme.scss";

/* Base visual para todas las rutas admin que usan AdminPageLayout. */
.admin-page-wrap {
  position: relative;
  isolation: isolate;
  width: 100%;
  max-width: 1500px;
  min-height: calc(100vh - 88px);
  margin: 0 auto;
  padding: clamp(10px, 1.5vw, 24px);
  border-radius: clamp(14px, 2vw, 22px);
  border: 1px solid color-mix(in srgb, var(--ad-border) 84%, transparent);
  /* Contenedor "card" sobre el fondo del admin (premium en light/dark) */
  background: var(--ad-card);
  color: var(--ad-text);
  box-shadow: var(--app-shadow-card);
  font-family: var(--bb-font-ui);
  overflow-x: hidden;
  overflow: hidden;

  .admin-page-wrap__title {
    margin: 0 0 12px;
    color: var(--ad-title);
    font-family: var(--bb-font-ui);
    font-size: clamp(2.1rem, 1.7rem + 1vw, 3.2rem);
    font-weight: 700;
    line-height: 1.05;
    letter-spacing: 0.01em;
  }

  .admin-page-wrap__toolbar {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    margin-bottom: 14px;
    padding: 10px;
    border-radius: 14px;
    border: 1px solid color-mix(in srgb, var(--ad-border) 82%, transparent);
    background:
      linear-gradient(
        165deg,
        color-mix(in srgb, var(--ad-card) 98%, transparent) 0%,
        color-mix(in srgb, var(--ad-row-hover) 70%, transparent) 100%
      );
    box-shadow: var(--app-shadow);
  }

  .admin-page-wrap__toolbar button,
  .admin-page-wrap__toolbar a,
  .admin-page-wrap__toolbar input,
  .admin-page-wrap__toolbar select {
    min-height: 44px;
  }

  .admin-page-wrap__toolbar > * {
    max-width: 100%;
  }

  button.p-2,
  button.p-1\.5,
  .btn-icon,
  .pagination-container .page-nav,
  .pagination-container .selected,
  .pagination-container .unselected {
    min-width: 44px;
    min-height: 44px;
  }

  .pagination-container .page-nav,
  .pagination-container .selected,
  .pagination-container .unselected {
    min-height: 44px;
  }

  .rounded-xl.border,
  [class*="rounded-xl border"] {
    border-radius: 16px !important;
    border-color: color-mix(in srgb, var(--ad-border) 84%, transparent) !important;
    box-shadow: var(--app-shadow) !important;
  }

  .overflow-x-auto {
    scrollbar-width: thin;
  }

  .overflow-x-auto::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .overflow-x-auto::-webkit-scrollbar-thumb {
    border-radius: 999px;
    background: color-mix(in srgb, var(--ad-border) 75%, transparent);
  }

  table {
    border-collapse: collapse;
  }

  thead th {
    position: sticky;
    top: 0;
    z-index: 2;
    background: var(--ad-header-bg) !important;
    border-bottom: 1px solid color-mix(in srgb, var(--ad-border) 88%, transparent);
    color: var(--ad-text-muted) !important;
    font-size: 0.9rem !important;
    font-weight: 800 !important;
    letter-spacing: 0.08em !important;
    text-transform: uppercase;
  }

  tbody td {
    color: var(--ad-text) !important;
    font-size: 1rem !important;
    font-weight: 600 !important;
    vertical-align: middle;
  }

  tbody tr {
    border-bottom: 1px solid color-mix(in srgb, var(--ad-border) 70%, transparent) !important;
    background: var(--ad-card) !important;
  }

  tbody tr:nth-child(2n) {
    background: var(--ad-row-zebra-bg) !important;
  }

  tbody tr:hover {
    background: var(--ad-row-hover-bg) !important;
  }

  tbody tr:last-child {
    border-bottom: 0 !important;
  }

  .md\:hidden [role="button"] {
    min-height: 68px;
  }

  .md\:hidden [role="button"] .font-semibold {
    color: var(--ad-title) !important;
  }

  .md\:hidden [role="button"] p {
    color: var(--ad-text-muted) !important;
  }

  .md\:hidden button.p-2,
  .md\:hidden [role="button"] button.p-2,
  .md\:hidden .rounded-lg.p-2 {
    min-width: 44px;
    min-height: 44px;
    width: 44px;
    height: 44px;
    padding: 10px !important;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
  }

  .space-y-2 {
    color: var(--ad-text) !important;
  }

  .space-y-2 .text-slate-500 {
    color: var(--ad-text-muted) !important;
  }

  .space-y-2 .text-white {
    color: var(--ad-title) !important;
  }

  .pagination-container {
    background: transparent !important;
    border-color: color-mix(in srgb, var(--ad-border) 84%, transparent) !important;
  }

  .pagination-container .left-text {
    color: var(--ad-text-muted) !important;
  }

  .pagination-container .selected {
    color: var(--ad-accent) !important;
  }

  .pagination-container .unselected,
  .pagination-container .points {
    color: var(--ad-text) !important;
  }

  .pagination-container svg,
  .pagination-container p {
    color: var(--ad-accent) !important;
  }

  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  select:focus-visible {
    outline: 2px solid color-mix(in srgb, var(--ad-accent) 62%, transparent);
    outline-offset: 2px;
  }

  /* Compatibilidad con clases legacy tailwind/slate. */
  [class*="bg-slate-950"],
  [class*="bg-slate-900"],
  [class*="bg-slate-800/50"],
  [class*="bg-slate-800/30"],
  [class*="bg-bear-light-100"],
  [class*="dark:bg-bear-dark-900"],
  [class*="dark:bg-bear-dark-500"],
  [class*="dark:bg-bear-dark-300"],
  [class*="dark:bg-bear-dark-100"] {
    background-color: color-mix(in srgb, var(--ad-card) 98%, transparent) !important;
  }

  [class*="bg-gray-200"],
  [class*="bg-gray-300"],
  [class*="bg-gray-400"],
  [class*="dark:bg-bear-dark-100/50"] {
    background-color: color-mix(in srgb, var(--ad-border) 72%, transparent) !important;
  }

  [class*="border-slate-800"],
  [class*="border-slate-700"],
  [class*="border-slate-600"],
  [class*="border-gray-200"],
  [class*="border-gray-300"],
  [class*="dark:border-bear-dark-100"],
  [class*="dark:divide-bear-dark-100"],
  [class*="divide-gray-200"] {
    border-color: var(--ad-border) !important;
  }

  [class*="text-gray-900"],
  [class*="text-bear-dark-900"] {
    color: var(--ad-title) !important;
  }

  .text-white {
    color: var(--ad-title) !important;
  }

  .text-slate-300,
  .text-slate-400,
  .text-slate-500,
  .text-gray-700,
  .text-gray-600,
  .text-gray-500,
  [class*="dark:text-gray-300"],
  [class*="dark:text-gray-400"],
  [class*="dark:text-gray-500"],
  [class*="dark:text-gray-600"] {
    color: var(--ad-text) !important;
  }

  .text-amber-200 {
    color: var(--app-status-warning) !important;
  }

  [class*="bg-amber-500/10"] {
    background-color: color-mix(in srgb, var(--app-status-warning) 14%, transparent) !important;
  }

  [class*="border-amber-500/30"] {
    border-color: color-mix(in srgb, var(--app-status-warning) 30%, transparent) !important;
  }

  [class*="bg-emerald-500/10"] {
    background-color: color-mix(in srgb, var(--app-status-success) 14%, transparent) !important;
  }

  [class*="text-emerald-400"] {
    color: var(--app-status-success) !important;
  }

  [class*="bg-slate-500/10"] {
    background-color: color-mix(in srgb, var(--ad-text-muted) 18%, transparent) !important;
  }

  .text-slate-400.uppercase {
    color: var(--ad-text-muted) !important;
  }

  input.bg-slate-900,
  select.bg-slate-900,
  input.bg-bear-light-100,
  select.bg-bear-light-100,
  [class*="dark:bg-bear-dark-300"] {
    background-color: color-mix(in srgb, var(--ad-input-bg) 95%, transparent) !important;
    border-color: color-mix(in srgb, var(--ad-input-border) 86%, transparent) !important;
    color: var(--ad-title) !important;
    border-radius: 11px;
    font-weight: 600;
  }

  [class*="placeholder-gray-500"]::placeholder,
  [class*="text-slate-500"]::placeholder {
    color: var(--ad-text-muted) !important;
  }

  button.bg-cyan-600,
  button.bg-bear-gradient,
  [class*="bg-bear-cyan"] {
    background: var(--app-gradient) !important;
    color: var(--app-btn-text) !important;
    border-color: transparent !important;
    box-shadow: 0 10px 22px color-mix(in srgb, var(--ad-accent) 24%, transparent);
  }

  /* Light: avoid neon halo around primary CTAs. */
  html[data-theme="light"] & button.bg-cyan-600,
  html[data-theme="light"] & button.bg-bear-gradient,
  html[data-theme="light"] & [class*="bg-bear-cyan"] {
    box-shadow: var(--app-shadow) !important;
  }

  [class*="text-bear-dark-500"] {
    color: var(--app-btn-text) !important;
  }

  [class*="hover:bg-cyan-500"]:hover {
    filter: brightness(1.04);
  }

  [class*="hover:text-cyan-400"]:hover,
  [class*="hover:text-bear-cyan"]:hover {
    color: var(--ad-accent) !important;
  }

  .bg-slate-950 tbody,
  [class*="bg-slate-900/50"] {
    background-color: color-mix(in srgb, var(--ad-card) 96%, transparent) !important;
  }

  tr.border-slate-800:hover,
  [class*="hover:bg-slate-900"]:hover,
  [class*="hover:bg-slate-800"]:hover,
  [class*="hover:bg-gray-100"]:hover,
  [class*="dark:hover:bg-bear-dark-500"]:hover {
    background-color: color-mix(in srgb, var(--ad-row-hover) 88%, transparent) !important;
  }
}

.admin-page-wrap::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(circle at 100% 0%, var(--bb-ambient-cyan) 0%, transparent 46%),
    radial-gradient(circle at 0% 100%, var(--bb-ambient-mint) 0%, transparent 42%);
  opacity: 0;
  transition: opacity 0.2s ease;
}

html[data-theme="dark"] .admin-page-wrap::before {
  opacity: 1;
}

.admin-page-wrap > * {
  position: relative;
  z-index: 1;
}

/* Legacy admin pages (usuarios/ordenes/cupones/etc.) coherence layer */
.admin-page-wrap :where(.btn-addUsers, .btn-addCoupon, .btn-addPlan, .btn-addDomain, .btn-addPhone) {
  min-height: 44px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--ad-accent) 52%, transparent);
  background: var(--app-gradient);
  color: var(--app-btn-text);
  font-size: 1rem;
  font-weight: 800;
  letter-spacing: 0.01em;
  box-shadow: var(--app-shadow);
}

.admin-page-wrap :where(.btn-addUsers, .btn-addCoupon, .btn-addPlan, .btn-addDomain, .btn-addPhone):hover {
  filter: saturate(1.05);
}

html[data-theme="dark"] .admin-page-wrap :where(.btn-addUsers, .btn-addCoupon, .btn-addPlan, .btn-addDomain, .btn-addPhone) {
  box-shadow: 0 10px 22px color-mix(in srgb, var(--ad-accent) 26%, transparent);
}

.admin-page-wrap :where(.search-input input, .input, .select-input select, .select-input .date-input) {
  min-height: 44px;
  border-radius: 12px;
  border: 1px solid color-mix(in srgb, var(--ad-input-border) 88%, transparent);
  background: color-mix(in srgb, var(--ad-input-bg) 96%, transparent);
  color: var(--ad-title);
  font-size: 1rem;
  font-weight: 600;
}

.admin-page-wrap :where(.search-input input, .input, .select-input select, .select-input .date-input)::placeholder {
  color: color-mix(in srgb, var(--ad-text-muted) 92%, transparent);
}

.admin-page-wrap :where(.search-input input, .input, .select-input select, .select-input .date-input):focus-visible {
  outline: none;
  border-color: color-mix(in srgb, var(--ad-accent) 58%, transparent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--ad-accent) 24%, transparent);
}

.admin-page-wrap .search-input__icon {
  color: color-mix(in srgb, var(--ad-text-muted) 94%, transparent);
}

html[data-theme="light"] .admin-page-wrap :where(.search-input input, .input, .select-input select, .select-input .date-input) {
  background: color-mix(in srgb, #ffffff 98.8%, var(--ad-input-bg)) !important;
  border-color: color-mix(in srgb, var(--ad-input-border) 92%, transparent) !important;
}

@media (max-width: 768px) {
  .admin-page-wrap {
    padding: 8px;
    border-radius: 12px;

    .admin-page-wrap__toolbar {
      padding: 8px;
    }

    .admin-page-wrap__toolbar input,
    .admin-page-wrap__toolbar select,
    .admin-page-wrap__toolbar button {
      min-height: 44px;
      width: 100%;
    }
  }
}
